<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDV M√°gico ‚ú® Pro | Sistema Profissional</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #e0e5ec;
            --glass: rgba(255,255,255,0.85);
            --primary: #6c5ce7;
            --primary-light: #8579ec;
            --primary-dark: #5649c0;
            --secondary: #00cec9;
            --accent: #fd79a8;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #ff7675;
            --info: #0984e3;
            --whatsapp: #25D366;
            --text: #2d3436;
            --text-light: #636e72;
            --shadow: 0 20px 40px rgba(31,38,135,0.15);
            --shadow-light: 0 10px 20px rgba(31,38,135,0.1);
            --border: 1px solid rgba(255,255,255,0.25);
            --border-radius: 24px;
            --transition: all 0.3s cubic-bezier(0.175,0.885,0.32,1.275);
        }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Nunito',sans-serif; }
        body {
            background: linear-gradient(135deg,#a8edea 0%,#fed6e3 100%);
            min-height:100vh; display:flex; padding:20px;
            color:var(--text); overflow-x:hidden; position:relative;
        }

        /* ‚îÄ‚îÄ‚îÄ PART√çCULAS M√ÅGICAS ‚îÄ‚îÄ‚îÄ */
        .magic-particle {
            position:fixed;
            border-radius:50%;
            pointer-events:none;
            opacity:0;
            z-index:0;
            animation:particleFloat linear infinite;
        }
        @keyframes particleFloat {
            0%   { transform:translateY(100vh) rotate(0deg); opacity:0; }
            10%  { opacity:0.7; }
            90%  { opacity:0.4; }
            100% { transform:translateY(-100px) rotate(720deg); opacity:0; }
        }

        /* ‚îÄ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ‚îÄ */
        .auth-container { display:flex; justify-content:center; align-items:center; width:100%; min-height:100vh; padding:20px; z-index:10; position:relative; }
        .auth-card { background:var(--glass); backdrop-filter:blur(20px); border-radius:var(--border-radius); box-shadow:var(--shadow); border:var(--border); padding:40px; width:100%; max-width:520px; animation:fadeIn .5s ease; }
        .auth-header { text-align:center; margin-bottom:30px; }
        .auth-logo { font-size:2.5rem; margin-bottom:15px; color:var(--primary); }
        .auth-title { font-size:2rem; font-weight:900; color:var(--primary); margin-bottom:10px; }
        .auth-subtitle { color:var(--text-light); margin-bottom:25px; }
        .auth-form { display:flex; flex-direction:column; gap:20px; }
        .form-group { display:flex; flex-direction:column; gap:8px; }
        .form-label { font-weight:700; color:var(--text); font-size:.9rem; }
        .form-input { padding:16px 20px; border-radius:16px; border:2px solid #dfe6e9; font-size:1rem; outline:none; background:rgba(255,255,255,.9); transition:var(--transition); }
        .form-input:focus { border-color:var(--primary); box-shadow:0 0 0 4px rgba(108,92,231,.2); transform:translateY(-2px); }
        .form-row { display:grid; grid-template-columns:1fr 1fr; gap:15px; }
        .auth-btn { background:linear-gradient(90deg,var(--primary),var(--primary-light)); color:white; border:none; padding:18px; border-radius:18px; font-weight:900; font-size:1.1rem; cursor:pointer; transition:var(--transition); margin-top:10px; display:flex; align-items:center; justify-content:center; gap:10px; }
        .auth-btn:hover { transform:translateY(-5px); box-shadow:0 15px 30px rgba(108,92,231,.4); }
        .auth-btn:disabled { opacity:.6; cursor:not-allowed; transform:none !important; }
        .auth-switch { text-align:center; margin-top:25px; color:var(--text-light); }
        .auth-switch a { color:var(--primary); text-decoration:none; font-weight:700; cursor:pointer; }
        .auth-switch a:hover { text-decoration:underline; }
        .plan-card { background:white; border-radius:20px; padding:25px; margin-top:20px; border:3px solid var(--primary); text-align:center; position:relative; overflow:hidden; }
        .plan-badge { position:absolute; top:15px; right:-30px; background:var(--success); color:white; padding:5px 30px; transform:rotate(45deg); font-size:.8rem; font-weight:700; }
        .plan-price { font-size:2.5rem; font-weight:900; color:var(--primary); margin:10px 0; }
        .plan-period { font-size:1rem; color:var(--text-light); }
        .plan-features { list-style:none; margin:20px 0; text-align:left; }
        .plan-features li { padding:8px 0; display:flex; align-items:center; gap:10px; }
        .plan-features li i { color:var(--success); }
        .terms-checkbox { display:flex; align-items:flex-start; gap:10px; margin:15px 0; font-size:.9rem; }
        .terms-checkbox input { margin-top:3px; }
        .terms-checkbox a { color:var(--primary); text-decoration:none; }
        .error-msg { color:var(--danger); font-size:.88rem; font-weight:700; margin-top:-10px; padding:10px 15px; background:rgba(255,118,117,.1); border-radius:12px; border-left:4px solid var(--danger); display:none; }
        .error-msg.show { display:block; }

        /* ‚îÄ‚îÄ‚îÄ APP ‚îÄ‚îÄ‚îÄ */
        .app-container { display:none; grid-template-columns:80px 1fr; width:100%; height:calc(100vh - 40px); background:var(--glass); backdrop-filter:blur(20px); border-radius:var(--border-radius); box-shadow:var(--shadow); border:var(--border); overflow:hidden; z-index:10; position:relative; }
        .sidebar { display:flex; flex-direction:column; align-items:center; padding-top:30px; background:rgba(255,255,255,.3); border-right:var(--border); position:relative; overflow:hidden; }
        .sidebar::before { content:''; position:absolute; top:0; left:0; width:100%; height:100%; background:linear-gradient(180deg,rgba(255,255,255,.6) 0%,rgba(255,255,255,.2) 100%); z-index:-1; }
        .nav-btn { width:56px; height:56px; border-radius:18px; border:none; background:transparent; font-size:1.5rem; margin-bottom:15px; cursor:pointer; transition:var(--transition); color:#b2bec3; display:flex; align-items:center; justify-content:center; position:relative; transform:scale(1); }
        .nav-btn:hover { transform:translateY(-5px) scale(1.05); background:#fff; box-shadow:0 10px 20px rgba(108,92,231,.2); }
        .nav-btn.active { background:var(--primary); color:#fff; box-shadow:0 10px 20px -5px rgba(108,92,231,.4); transform:scale(1.05); }
        .nav-btn.pop { animation:navBtnPop .35s ease forwards; }
        @keyframes navBtnPop { 0%{transform:scale(1)} 40%{transform:scale(1.25)} 70%{transform:scale(.95)} 100%{transform:scale(1.05)} }
        .nav-notification { position:absolute; top:-5px; right:-5px; background:var(--danger); color:white; font-size:.7rem; border-radius:50%; width:18px; height:18px; display:flex; align-items:center; justify-content:center; font-weight:800; }
        .content-area { padding:30px; overflow-y:auto; position:relative; background:linear-gradient(135deg,rgba(255,255,255,.9) 0%,rgba(248,248,255,.8) 100%); }
        .section { display:none; height:100%; animation:fadeIn .5s ease; }
        .section.active { display:block; }
        @keyframes fadeIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
        @keyframes zoomIn { from{transform:scale(.7);opacity:0} to{transform:scale(1);opacity:1} }
        @keyframes spin { to{transform:rotate(360deg)} }
        @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }

        h2 { font-weight:900; font-size:2.2rem; margin-bottom:20px; color:var(--primary); display:flex; align-items:center; gap:15px; position:relative; }
        h2::after { content:''; position:absolute; bottom:-8px; left:0; width:60px; height:4px; background:linear-gradient(90deg,var(--primary),var(--secondary)); border-radius:2px; }

        /* ‚îÄ‚îÄ‚îÄ PDV ‚îÄ‚îÄ‚îÄ */
        .pdv-header { display:flex; gap:15px; margin-bottom:25px; flex-wrap:wrap; }
        .scan-input { flex:1; min-width:300px; padding:18px 20px; border-radius:18px; border:2px solid var(--primary); font-size:1.1rem; outline:none; background:rgba(255,255,255,.9); transition:var(--transition); box-shadow:0 5px 15px rgba(0,0,0,.05); }
        .scan-input:focus { border-color:var(--secondary); box-shadow:0 0 0 4px rgba(0,206,201,.2); transform:translateY(-2px); }
        .quick-actions { display:flex; gap:10px; }
        .quick-action-btn { padding:12px 20px; background:white; border:2px solid #dfe6e9; border-radius:15px; font-weight:700; cursor:pointer; transition:var(--transition); display:flex; align-items:center; gap:8px; }
        .quick-action-btn:hover { background:var(--primary); color:white; border-color:var(--primary); transform:translateY(-3px); }
        .pdv-grid { display:grid; grid-template-columns:2fr 1fr; gap:25px; height:calc(100% - 180px); }
        .product-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:20px; align-content:start; overflow-y:auto; padding-right:10px; max-height:calc(100vh - 280px); }
        .product-card { background:white; border-radius:22px; padding:20px; text-align:center; cursor:pointer; transition:var(--transition); border:2px solid transparent; box-shadow:var(--shadow-light); position:relative; overflow:hidden; display:flex; flex-direction:column; justify-content:space-between; }
        .product-card::before { content:''; position:absolute; top:0; left:0; width:100%; height:6px; background:linear-gradient(90deg,var(--primary),var(--secondary)); opacity:0; transition:opacity .3s; }
        .product-card:hover { transform:translateY(-10px) scale(1.03); border-color:var(--secondary); box-shadow:0 20px 40px rgba(0,206,201,.2); }
        .product-card:hover::before { opacity:1; }
        .product-emoji { font-size:3.5rem; margin-bottom:15px; display:block; transition:transform .3s; }
        .product-card:hover .product-emoji { transform:scale(1.2) rotate(5deg); }
        .product-name { font-weight:800; font-size:1rem; margin-bottom:8px; color:var(--text); }
        .product-price { color:var(--primary); font-weight:900; font-size:1.3rem; margin-bottom:5px; }
        .product-stock { position:absolute; top:10px; right:10px; font-size:.75rem; background:#dfe6e9; padding:4px 10px; border-radius:12px; font-weight:700; }
        .stock-low { background:var(--danger); color:white; }
        .stock-medium { background:var(--warning); color:var(--text); }
        .stock-high { background:var(--success); color:white; }
        .product-category { font-size:.75rem; color:var(--text-light); background:#f8f9fa; padding:3px 10px; border-radius:10px; margin-top:5px; display:inline-block; }

        /* ‚îÄ‚îÄ‚îÄ CART ‚îÄ‚îÄ‚îÄ */
        .cart-panel { background:white; border-radius:28px; padding:25px; display:flex; flex-direction:column; box-shadow:var(--shadow-light); height:100%; }
        .cart-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; }
        .clear-cart { background:var(--danger); color:white; border:none; padding:8px 15px; border-radius:12px; font-size:.85rem; cursor:pointer; transition:var(--transition); display:flex; align-items:center; gap:5px; }
        .clear-cart:hover { background:#ff5252; transform:translateY(-2px); }
        .cart-items { flex:1; overflow-y:auto; margin:15px 0; padding-right:5px; max-height:300px; }
        .cart-item { display:flex; justify-content:space-between; align-items:center; background:#f8f9fa; margin-bottom:12px; padding:15px; border-radius:16px; font-size:.95rem; transition:var(--transition); border-left:4px solid var(--primary); }
        .cart-item:hover { background:#f1f3ff; transform:translateX(5px); }
        .cart-item-info { flex:1; }
        .cart-item-name { font-weight:700; margin-bottom:5px; }
        .cart-item-qty { display:flex; align-items:center; gap:10px; margin-top:8px; }
        .qty-btn { width:28px; height:28px; border-radius:8px; border:1px solid #dfe6e9; background:white; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; transition:var(--transition); }
        .qty-btn:hover { background:var(--primary); color:white; border-color:var(--primary); }
        .remove-btn { color:var(--danger); cursor:pointer; padding:8px; border-radius:10px; transition:var(--transition); }
        .remove-btn:hover { background:var(--danger); color:white; transform:rotate(90deg); }
        .cart-footer { border-top:2px dashed #dfe6e9; padding-top:20px; }
        .cart-total { font-size:1.8rem; font-weight:900; text-align:right; margin-bottom:20px; color:var(--primary); display:flex; justify-content:space-between; align-items:center; }
        .cart-total-label { font-size:1.2rem; color:var(--text-light); }
        .btn-checkout { background:linear-gradient(90deg,var(--primary),var(--primary-light)); color:white; border:none; padding:18px; border-radius:18px; font-weight:900; font-size:1.2rem; cursor:pointer; width:100%; transition:var(--transition); box-shadow:0 10px 20px rgba(108,92,231,.3); display:flex; align-items:center; justify-content:center; gap:10px; }
        .btn-checkout:hover { transform:translateY(-5px); box-shadow:0 15px 30px rgba(108,92,231,.4); }
        .btn-checkout:disabled { background:#b2bec3; cursor:not-allowed; box-shadow:none; transform:none; }

        /* ‚îÄ‚îÄ‚îÄ MODALS ‚îÄ‚îÄ‚îÄ */
        .modal-overlay { 
            position:fixed; 
            top:0; 
            left:0; 
            width:100%; 
            height:100%; 
            background:rgba(0,0,0,.7); 
            backdrop-filter:blur(10px); 
            z-index:999999; 
            display:none; 
            justify-content:center; 
            align-items:center; 
            animation:fadeIn .3s ease; 
        }
        .modal-content { 
            background:white; 
            padding:30px; 
            border-radius:32px; 
            width:500px; 
            max-width:90%; 
            text-align:center; 
            animation:zoomIn .4s cubic-bezier(.175,.885,.32,1.275); 
            box-shadow:0 30px 60px rgba(0,0,0,.2); 
            border:var(--border); 
            max-height:90vh; 
            overflow-y:auto;
            position:relative;
            z-index:1000000;
        }
        .payment-options { 
            display:grid; 
            grid-template-columns:1fr 1fr;
            gap:10px; 
            margin:20px 0; 
        }
        .receipt-options { 
            display:grid; 
            gap:10px; 
            margin:20px 0; 
        }
        .btn-pay, .btn-receipt { 
            padding:15px; 
            border:2px solid #dfe6e9; 
            background:white; 
            border-radius:16px; 
            font-size:1rem; 
            font-weight:bold; 
            cursor:pointer; 
            display:flex; 
            align-items:center; 
            justify-content:center; 
            gap:8px; 
            transition:var(--transition); 
        }
        .btn-pay:hover { 
            transform:translateY(-3px); 
            border-color:var(--primary); 
            background:#f8f9fa; 
            color:var(--primary); 
            box-shadow:0 8px 15px rgba(0,0,0,.1); 
        }
        .btn-whatsapp { color:var(--whatsapp); border-color:var(--whatsapp); }
        .btn-whatsapp:hover { background:var(--whatsapp); color:white; border-color:var(--whatsapp); }
        .btn-email { color:var(--info); border-color:var(--info); }
        .btn-email:hover { background:var(--info); color:white; border-color:var(--info); }

        /* ‚îÄ‚îÄ‚îÄ STOCK/DASHBOARD ‚îÄ‚îÄ‚îÄ */
        .table-container { background:white; padding:25px; border-radius:24px; overflow:hidden; box-shadow:var(--shadow-light); }
        table { width:100%; border-collapse:collapse; }
        th,td { padding:15px; text-align:left; border-bottom:1px solid #f1f2f6; }
        th { color:var(--primary); font-weight:800; background:#f8f9ff; }
        tr:hover { background:#f8f9fa; }
        .form-add { display:flex; gap:10px; margin-bottom:25px; flex-wrap:wrap; }
        input, select { padding:14px; border-radius:14px; border:2px solid #dfe6e9; flex:1; min-width:150px; transition:var(--transition); font-size:1rem; }
        input:focus, select:focus { border-color:var(--primary); outline:none; box-shadow:0 0 0 3px rgba(108,92,231,.1); }
        .dashboard-cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:25px; margin-bottom:30px; }
        .card-metric { background:white; padding:25px; border-radius:24px; display:flex; align-items:center; gap:20px; box-shadow:var(--shadow-light); transition:var(--transition); position:relative; overflow:hidden; }
        .card-metric:hover { transform:translateY(-10px); box-shadow:0 20px 40px rgba(0,0,0,.1); }
        .card-metric::before { content:''; position:absolute; top:0; left:0; width:8px; height:100%; background:linear-gradient(180deg,var(--primary),var(--secondary)); }
        .metric-icon { font-size:2.8rem; background:linear-gradient(135deg,var(--primary),var(--secondary)); width:70px; height:70px; display:flex; align-items:center; justify-content:center; border-radius:50%; color:white; }
        .metric-info p { color:var(--text-light); font-size:.9rem; margin-bottom:5px; }
        .metric-info h3 { font-size:2rem; color:var(--text); }
        .chart-container { background:white; padding:25px; border-radius:24px; margin-bottom:30px; box-shadow:var(--shadow-light); }
        .chart-bars { display:flex; justify-content:space-around; align-items:flex-end; height:200px; padding:0 20px; }
        .chart-bar-wrap { display:flex; flex-direction:column; align-items:center; gap:8px; }
        .chart-bar { width:30px; background:linear-gradient(0deg,var(--primary),var(--secondary)); border-radius:5px 5px 0 0; transition:height .6s ease; }
        .chart-label { font-size:.8rem; color:var(--text-light); font-weight:700; }

        /* ‚îÄ‚îÄ‚îÄ MISC ‚îÄ‚îÄ‚îÄ */
        .toast { position:fixed; bottom:30px; right:30px; color:white; padding:20px 30px; border-radius:18px; box-shadow:0 20px 40px rgba(0,0,0,.2); transform:translateX(400px); transition:transform .4s cubic-bezier(.175,.885,.32,1.275); font-weight:700; z-index:1000001; display:flex; align-items:center; gap:15px; max-width:350px; }
        .toast.show { transform:translateX(0); }
        .toast.success { background:var(--success); }
        .toast.warning { background:var(--warning); color:var(--text); }
        .toast.error { background:var(--danger); }
        .toast.info { background:var(--info); }
        .toast-icon { font-size:1.3rem; }
        .low-stock-badge { position:fixed; bottom:30px; left:30px; background:var(--danger); color:white; padding:15px 25px; border-radius:16px; display:flex; align-items:center; gap:12px; cursor:pointer; z-index:100; box-shadow:0 10px 20px rgba(255,118,117,.3); transition:var(--transition); }
        .low-stock-badge:hover { transform:translateY(-5px); }
        .loader { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,.9); z-index:1000002; justify-content:center; align-items:center; flex-direction:column; gap:20px; }
        .loader-spinner { width:60px; height:60px; border:6px solid #dfe6e9; border-top-color:var(--primary); border-radius:50%; animation:spin 1s linear infinite; }
        .suggestions-box { position:absolute; background:white; border-radius:16px; box-shadow:0 20px 40px rgba(0,0,0,.15); z-index:1000; max-height:300px; overflow-y:auto; display:none; width:100%; margin-top:5px; }
        .suggestion-item { padding:15px; cursor:pointer; border-bottom:1px solid #f1f2f6; display:flex; align-items:center; gap:15px; transition:var(--transition); }
        .suggestion-item:hover { background:#f8f9ff; }
        .suggestion-item.active-suggestion { background:#f0edff; border-left:3px solid var(--primary); }
        .live-stats { display:flex; gap:15px; margin-bottom:25px; flex-wrap:wrap; }
        .stat-badge { background:white; padding:12px 20px; border-radius:16px; display:flex; align-items:center; gap:10px; box-shadow:var(--shadow-light); font-weight:700; }
        .stat-badge i { color:var(--primary); font-size:1.2rem; }
        .stat-badge.timer-badge { background:linear-gradient(135deg,var(--primary),var(--secondary)); color:white; }
        .stat-badge.timer-badge i { color:white; }
        .dark-mode-toggle { position:absolute; bottom:30px; left:50%; transform:translateX(-50%); background:transparent; border:none; font-size:1.5rem; cursor:pointer; color:var(--text-light); transition:var(--transition); }
        .dark-mode-toggle:hover { color:var(--primary); transform:translateX(-50%) rotate(30deg); }
        .floating-action-btn { position:fixed; bottom:30px; right:30px; width:60px; height:60px; border-radius:50%; background:var(--primary); color:white; border:none; font-size:1.5rem; cursor:pointer; box-shadow:0 10px 20px rgba(108,92,231,.3); z-index:100; display:flex; align-items:center; justify-content:center; transition:var(--transition); }
        .floating-action-btn:hover { transform:scale(1.1) rotate(90deg); }
        .floating { animation:float 3s ease-in-out infinite; }
        .mode-badge { display:inline-flex; align-items:center; gap:6px; padding:6px 14px; border-radius:20px; font-size:.8rem; font-weight:700; }
        .mode-local { background:#ffeaa7; color:#e17055; }
        .mode-cloud { background:#d4edda; color:#155724; }

        /* ‚îÄ‚îÄ‚îÄ HIGHLIGHT ANIMATION ‚îÄ‚îÄ‚îÄ */
        @keyframes highlightPulse {
            0%   { box-shadow:0 0 0 0 rgba(0,206,201,.7); transform:scale(1); }
            50%  { box-shadow:0 0 0 20px rgba(0,206,201,0); transform:scale(1.06); }
            100% { box-shadow:0 0 0 0 rgba(0,206,201,0); transform:scale(1); }
        }
        .product-card.highlight-add { animation:highlightPulse .6s ease; border-color:var(--secondary) !important; }

        /* ‚îÄ‚îÄ‚îÄ CART SUMMARY ‚îÄ‚îÄ‚îÄ */
        .cart-summary { background:#f8f9fa; border-radius:16px; padding:14px; margin-bottom:14px; font-size:.92rem; }
        .cart-summary-row { display:flex; justify-content:space-between; padding:4px 0; }
        .cart-summary-row.discount { color:var(--success); font-weight:700; }
        .cart-summary-row.total-row { font-weight:900; font-size:1.1rem; color:var(--primary); border-top:1px dashed #dfe6e9; padding-top:10px; margin-top:6px; }

        /* ‚îÄ‚îÄ‚îÄ EMOJI PREVIEW ‚îÄ‚îÄ‚îÄ */
        .emoji-input-wrap { position:relative; flex:0 0 120px; }
        .emoji-preview-badge { position:absolute; right:12px; top:50%; transform:translateY(-50%); font-size:1.6rem; pointer-events:none; line-height:1; }

        /* ‚îÄ‚îÄ‚îÄ DISCOUNT BANNER ‚îÄ‚îÄ‚îÄ */
        .discount-banner { display:none; background:linear-gradient(90deg,var(--success),#00d2d3); color:white; border-radius:12px; padding:8px 16px; margin-bottom:12px; font-weight:800; font-size:.9rem; justify-content:space-between; align-items:center; }
        .discount-banner.show { display:flex; }
        .discount-banner button { background:rgba(255,255,255,.3); border:none; color:white; border-radius:8px; padding:3px 8px; cursor:pointer; font-size:.8rem; font-weight:700; }
        .discount-banner button:hover { background:rgba(255,255,255,.5); }

        /* ‚îÄ‚îÄ‚îÄ MODAL FIXES ‚îÄ‚îÄ‚îÄ */
        .modal-actions {
            display:flex;
            gap:10px;
            margin-top:15px;
        }
        .modal-actions button {
            flex:1;
            padding:15px;
            border-radius:16px;
            font-weight:bold;
            cursor:pointer;
            border:none;
            transition:var(--transition);
        }
        .btn-cancel {
            background:#ff7675;
            color:white;
        }
        .btn-cancel:hover {
            background:#ff5252;
            transform:translateY(-3px);
        }
        .btn-discount {
            background:linear-gradient(90deg,var(--primary),var(--primary-light));
            color:white;
        }
        .btn-discount:hover {
            transform:translateY(-3px);
            box-shadow:0 10px 20px rgba(108,92,231,.3);
        }

        /* ‚îÄ‚îÄ‚îÄ NOVO: ABERTURA/FECHAMENTO DE CAIXA ‚îÄ‚îÄ‚îÄ */
        .cashier-control {
            background:white;
            border-radius:20px;
            padding:20px;
            margin-bottom:20px;
            box-shadow:var(--shadow-light);
        }
        .cashier-status {
            display:flex;
            align-items:center;
            justify-content:space-between;
            margin-bottom:15px;
        }
        .cashier-status-badge {
            display:flex;
            align-items:center;
            gap:10px;
            padding:10px 20px;
            border-radius:12px;
            font-weight:800;
        }
        .cashier-open {
            background:var(--success);
            color:white;
        }
        .cashier-closed {
            background:var(--danger);
            color:white;
        }
        .cashier-actions {
            display:flex;
            gap:10px;
        }
        .cashier-input-group {
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
            gap:15px;
            margin-top:15px;
        }

        /* ‚îÄ‚îÄ‚îÄ NOVO: SANGRIA E SUPRIMENTO ‚îÄ‚îÄ‚îÄ */
        .cash-movement-card {
            background:#f8f9fa;
            border-radius:16px;
            padding:15px;
            margin-bottom:10px;
            border-left:4px solid var(--primary);
        }
        .cash-movement-card.withdrawal {
            border-left-color:var(--danger);
        }
        .cash-movement-card.supply {
            border-left-color:var(--success);
        }

        @media(max-width:992px){
            .pdv-grid{grid-template-columns:1fr;height:auto}
            .product-list{max-height:400px}
            .app-container{grid-template-columns:1fr;grid-template-rows:80px 1fr}
            .sidebar{flex-direction:row;justify-content:center;padding-top:0;padding:10px}
            .nav-btn{margin-bottom:0;margin-right:10px}
        }
        @media(max-width:768px){
            .dashboard-cards{grid-template-columns:1fr}
            .form-add,.pdv-header{flex-direction:column}
            .scan-input,.form-row{min-width:100%;grid-template-columns:1fr}
            body{padding:10px}
            .payment-options {
                grid-template-columns:1fr;
            }
        }
    </style>
</head>
<body>

<!-- Part√≠culas m√°gicas -->
<div id="particlesContainer" aria-hidden="true"></div>

<!-- Loader -->
<div class="loader" id="loader">
    <div class="loader-spinner"></div>
    <p>Carregando magia... ‚ú®</p>
</div>

<!-- Auth -->
<div class="auth-container" id="authContainer">
    <!-- Login -->
    <div class="auth-card" id="loginCard">
        <div class="auth-header">
            <div class="auth-logo">‚ú®</div>
            <h1 class="auth-title">PDV M√°gico Pro</h1>
            <p class="auth-subtitle">Sistema Profissional de Vendas</p>
        </div>
        <div class="error-msg" id="loginError"></div>
        <div class="auth-form">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="loginEmail" placeholder="seu@email.com" autocomplete="email">
            </div>
            <div class="form-group">
                <label class="form-label">Senha</label>
                <input type="password" class="form-input" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
            </div>
            <button class="auth-btn" id="loginBtn" onclick="loginUser()">
                <i class="fas fa-sign-in-alt"></i> Entrar no Sistema
            </button>
            <div class="auth-switch">
                N√£o tem conta? <a onclick="showRegister()">Cadastre-se gratuitamente</a>
            </div>
        </div>
    </div>

    <!-- Register -->
    <div class="auth-card" id="registerCard" style="display:none">
        <div class="auth-header">
            <div class="auth-logo">üöÄ</div>
            <h1 class="auth-title">Criar Conta</h1>
            <p class="auth-subtitle">Comece gratuitamente</p>
        </div>
        <div class="plan-card">
            <div class="plan-badge">7 DIAS GR√ÅTIS</div>
            <h3>Plano Profissional</h3>
            <div class="plan-price">R$ 29,90</div>
            <div class="plan-period">por m√™s ap√≥s o trial</div>
            <ul class="plan-features">
                <li><i class="fas fa-check"></i> PDV Completo com busca por voz</li>
                <li><i class="fas fa-check"></i> Gest√£o de Estoque inteligente</li>
                <li><i class="fas fa-check"></i> Dashboard Anal√≠tico Avan√ßado</li>
                <li><i class="fas fa-check"></i> Abertura/Fechamento de Caixa</li>
                <li><i class="fas fa-check"></i> Sangria e Suprimento</li>
                <li><i class="fas fa-check"></i> Suporte 24/7 e backups na nuvem</li>
            </ul>
        </div>
        <div class="error-msg" id="registerError"></div>
        <div class="auth-form" style="margin-top:20px">
            <div class="form-group">
                <label class="form-label">Nome da Empresa</label>
                <input type="text" class="form-input" id="regCompany" placeholder="Sua Empresa LTDA">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">CNPJ/CPF</label>
                    <input type="text" class="form-input" id="regDocument" placeholder="000.000.000-00">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefone</label>
                    <input type="tel" class="form-input" id="regPhone" placeholder="(11) 99999-9999">
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="regEmail" placeholder="seu@email.com" autocomplete="email">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Senha</label>
                    <input type="password" class="form-input" id="regPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label class="form-label">Confirmar Senha</label>
                    <input type="password" class="form-input" id="regConfirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
                </div>
            </div>
            <div class="terms-checkbox">
                <input type="checkbox" id="regTerms">
                <label for="regTerms">Concordo com os <a href="#" onclick="showTermsModal()">Termos de Uso</a> e autorizo cobran√ßa de R$ 29,90/m√™s ap√≥s o trial.</label>
            </div>
            <button class="auth-btn" id="registerBtn" onclick="registerUser()">
                <i class="fas fa-rocket"></i> Come√ßar Per√≠odo Gr√°tis
            </button>
            <div class="auth-switch">J√° tem conta? <a onclick="showLogin()">Fa√ßa login</a></div>
        </div>
    </div>
</div>

<!-- App -->
<div class="app-container" id="appContainer">
    <nav class="sidebar">
        <button class="nav-btn active" onclick="switchTab('pdv')" title="Vendas (F1)">üõí<span class="nav-notification" id="cartNotification" style="display:none">0</span></button>
        <button class="nav-btn" onclick="switchTab('stock')" title="Estoque (F2)">üì¶<span class="nav-notification" id="stockNotification" style="display:none">0</span></button>
        <button class="nav-btn" onclick="switchTab('dashboard')" title="Dashboard (F3)">üìä</button>
        <button class="nav-btn" onclick="switchTab('cashier')" title="Caixa (F4)">üí∞</button>
        <button class="nav-btn" onclick="openAccountModal()" title="Conta">üë§</button>
        <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Modo Escuro">üåô</button>
    </nav>
    <main class="content-area">
        <!-- PDV -->
        <section id="pdv" class="section active">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;flex-wrap:wrap;gap:10px">
                <h2><i class="fas fa-cash-register"></i> Caixa Inteligente ‚ú®</h2>
                <div style="display:flex;gap:10px;align-items:center">
                    <div class="stat-badge" id="cashierStatusBadge" style="display:none">
                        <i class="fas fa-lock"></i><span>Caixa Fechado</span>
                    </div>
                    <div class="stat-badge" id="subscriptionStatus" style="background:var(--success);color:white">
                        <i class="fas fa-crown"></i><span>Plano Ativo</span>
                    </div>
                </div>
            </div>
            
            <div class="pdv-header">
                <input type="text" id="barcodeInput" class="scan-input" placeholder="üîç Escaneie ou digite o nome do produto... (F2 para voz)">
                <div class="quick-actions">
                    <button class="quick-action-btn" onclick="openVoiceSearch()"><i class="fas fa-microphone"></i> Voz</button>
                    <button class="quick-action-btn" onclick="applyDiscount()"><i class="fas fa-tag"></i> Desconto</button>
                    <button class="quick-action-btn" onclick="openQuickProductModal()"><i class="fas fa-plus"></i> R√°pido</button>
                </div>
            </div>
            
            <div style="position:relative">
                <div class="suggestions-box" id="suggestionsBox"></div>
            </div>
            
            <!-- Live Stats -->
            <div class="live-stats">
                <div class="stat-badge"><i class="fas fa-shopping-cart"></i><span id="liveCartCount">0 itens</span></div>
                <div class="stat-badge"><i class="fas fa-dollar-sign"></i><span id="liveCartTotal">R$ 0,00</span></div>
                <div class="stat-badge timer-badge"><i class="fas fa-stopwatch"></i><span id="liveSaleTimer">00:00</span></div>
            </div>
            
            <div class="pdv-grid">
                <div class="product-list" id="productsGrid"></div>
                <div class="cart-panel">
                    <div class="cart-header">
                        <h3><i class="fas fa-shopping-basket"></i> Cesta</h3>
                        <button class="clear-cart" onclick="clearCart()" id="clearCartBtn" disabled><i class="fas fa-trash"></i> Limpar (F8)</button>
                    </div>
                    <div class="cart-items" id="cartItems">
                        <div style="text-align:center;color:#b2bec3;margin-top:50px;padding:30px">
                            <i class="fas fa-shopping-basket" style="font-size:3rem;margin-bottom:15px;opacity:.5"></i>
                            <p>Cesta vazia üçÉ</p>
                        </div>
                    </div>
                    
                    <!-- Banner de desconto ativo -->
                    <div class="discount-banner" id="discountBanner">
                        <span id="discountBannerText">üéâ Desconto ativo</span>
                        <button onclick="removeDiscount()">‚úï Remover</button>
                    </div>
                    
                    <div class="cart-footer">
                        <!-- Resumo detalhado -->
                        <div class="cart-summary" id="cartSummary" style="display:none">
                            <div class="cart-summary-row"><span>Subtotal:</span><span id="summarySubtotal">R$ 0,00</span></div>
                            <div class="cart-summary-row discount" id="summaryDiscountRow" style="display:none"><span id="summaryDiscountLabel">Desconto:</span><span id="summaryDiscount">-R$ 0,00</span></div>
                            <div class="cart-summary-row total-row"><span>Total:</span><span id="summaryTotal">R$ 0,00</span></div>
                        </div>
                        <div class="cart-total"><span class="cart-total-label">Total:</span><span id="cartTotal">R$ 0,00</span></div>
                        <button class="btn-checkout" id="btnCheckout" onclick="openPaymentModal()" disabled><i class="fas fa-rocket"></i> Finalizar (F5) üöÄ</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- STOCK -->
        <section id="stock" class="section">
            <h2><i class="fas fa-boxes"></i> Gest√£o de Estoque üì¶</h2>
            <div class="form-add">
                <input type="text" id="newProdName" placeholder="Nome do Produto" oninput="suggestEmoji()">
                <input type="number" id="newProdPrice" placeholder="Pre√ßo (R$)" step="0.01" min="0">
                <input type="number" id="newProdStock" placeholder="Qtd" min="0">
                <select id="newProdCategory">
                    <option value="">Categoria...</option>
                    <option value="alimento">üçî Alimentos</option>
                    <option value="bebida">ü•§ Bebidas</option>
                    <option value="limpeza">üßº Limpeza</option>
                    <option value="eletronico">üì± Eletr√¥nicos</option>
                    <option value="vestuario">üëï Vestu√°rio</option>
                    <option value="outro">üì¶ Outros</option>
                </select>
                <div class="emoji-input-wrap">
                    <input type="text" id="newProdEmoji" placeholder="Emoji" oninput="updateEmojiPreview()" style="max-width:120px">
                    <span class="emoji-preview-badge" id="emojiPreviewBadge">üì¶</span>
                </div>
                <button class="btn-checkout" style="width:auto;padding:14px 25px" onclick="addProduct()"><i class="fas fa-plus-circle"></i> Adicionar</button>
            </div>
            <div class="table-container">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
                    <h3 style="margin:0">Produtos Cadastrados</h3>
                    <div style="display:flex;gap:10px">
                        <input type="text" id="stockSearch" placeholder="Buscar..." style="width:200px" oninput="filterStockTable()">
                        <button class="quick-action-btn" onclick="exportStockCSV()"><i class="fas fa-file-export"></i> Exportar</button>
                    </div>
                </div>
                <table id="stockTable">
                    <thead><tr><th>Item</th><th>Pre√ßo</th><th>Estoque</th><th>Categoria</th><th>A√ß√µes</th></tr></thead>
                    <tbody id="stockTableBody"></tbody>
                </table>
            </div>
        </section>

        <!-- DASHBOARD -->
        <section id="dashboard" class="section">
            <h2><i class="fas fa-chart-line"></i> Dashboard üìà</h2>
            <div class="dashboard-cards">
                <div class="card-metric"><div class="metric-icon">üí∞</div><div class="metric-info"><p>Vendas Hoje</p><h3 id="dashTotalSales">R$ 0,00</h3><p style="font-size:.8rem;color:var(--success)" id="dashSalesChange">+0% vs ontem</p></div></div>
                <div class="card-metric"><div class="metric-icon">üßæ</div><div class="metric-info"><p>Tickets</p><h3 id="dashTotalTickets">0</h3><p style="font-size:.8rem;color:var(--text-light)" id="dashAvgTicket">M√©dia: R$ 0,00</p></div></div>
                <div class="card-metric"><div class="metric-icon">üî•</div><div class="metric-info"><p>Mais Vendido</p><h3 id="dashTopProduct">-</h3><p style="font-size:.8rem;color:var(--text-light)" id="dashTopProductQty">0 unidades</p></div></div>
                <div class="card-metric"><div class="metric-icon">üì¶</div><div class="metric-info"><p>Estoque Baixo</p><h3 id="dashLowStock">0</h3><p style="font-size:.8rem;color:var(--danger)">Itens cr√≠ticos</p></div></div>
            </div>
            <div class="chart-container">
                <h3>Vendas por Dia da Semana</h3>
                <div class="chart-bars" id="salesChart"></div>
            </div>
            <div class="table-container">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
                    <h3 style="margin:0">Hist√≥rico de Vendas</h3>
                    <div style="display:flex;gap:10px;align-items:center">
                        <select id="salesFilter" onchange="filterSalesHistory()" style="width:160px">
                            <option value="all">Todas as vendas</option>
                            <option value="today">Hoje</option>
                            <option value="week">Esta semana</option>
                            <option value="month">Este m√™s</option>
                        </select>
                        <button class="quick-action-btn" onclick="exportSalesCSV()"><i class="fas fa-download"></i> Exportar</button>
                    </div>
                </div>
                <table>
                    <thead><tr><th>Data/Hora</th><th>M√©todo</th><th>Itens</th><th>Total</th><th>A√ß√µes</th></tr></thead>
                    <tbody id="salesHistoryBody"></tbody>
                </table>
            </div>
        </section>

        <!-- NOVO: CONTROLE DE CAIXA -->
        <section id="cashier" class="section">
            <h2><i class="fas fa-cash-register"></i> Controle de Caixa üí∞</h2>
            
            <!-- Controle de Abertura/Fechamento -->
            <div class="cashier-control">
                <div class="cashier-status">
                    <div>
                        <h3 style="margin-bottom:5px">Status do Caixa</h3>
                        <div class="cashier-status-badge" id="cashierStatusBadgeFull">
                            <i class="fas fa-lock"></i>
                            <span>Caixa Fechado</span>
                        </div>
                    </div>
                    <div class="cashier-actions" id="cashierActionsOpen">
                        <button class="quick-action-btn" onclick="openCashierModal()" style="background:var(--success);color:white;border-color:var(--success)">
                            <i class="fas fa-lock-open"></i> Abrir Caixa
                        </button>
                    </div>
                    <div class="cashier-actions" id="cashierActionsClose" style="display:none">
                        <button class="quick-action-btn" onclick="openWithdrawalModal()">
                            <i class="fas fa-minus-circle"></i> Sangria
                        </button>
                        <button class="quick-action-btn" onclick="openSupplyModal()">
                            <i class="fas fa-plus-circle"></i> Suprimento
                        </button>
                        <button class="quick-action-btn" onclick="closeCashierModal()" style="background:var(--danger);color:white;border-color:var(--danger)">
                            <i class="fas fa-lock"></i> Fechar Caixa
                        </button>
                    </div>
                </div>
                
                <div id="cashierDetails" style="display:none;margin-top:20px">
                    <div class="cashier-input-group">
                        <div>
                            <label style="font-weight:700;font-size:.9rem;display:block;margin-bottom:5px">Operador:</label>
                            <div style="padding:12px;background:#f8f9fa;border-radius:12px" id="cashierOperator">-</div>
                        </div>
                        <div>
                            <label style="font-weight:700;font-size:.9rem;display:block;margin-bottom:5px">Abertura:</label>
                            <div style="padding:12px;background:#f8f9fa;border-radius:12px" id="cashierOpenTime">-</div>
                        </div>
                        <div>
                            <label style="font-weight:700;font-size:.9rem;display:block;margin-bottom:5px">Saldo Inicial:</label>
                            <div style="padding:12px;background:#f8f9fa;border-radius:12px;font-weight:800;color:var(--primary)" id="cashierInitial">R$ 0,00</div>
                        </div>
                        <div>
                            <label style="font-weight:700;font-size:.9rem;display:block;margin-bottom:5px">Saldo Atual:</label>
                            <div style="padding:12px;background:#f8f9fa;border-radius:12px;font-weight:800;color:var(--success)" id="cashierCurrent">R$ 0,00</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Movimenta√ß√µes -->
            <div class="table-container">
                <h3 style="margin-bottom:20px">Movimenta√ß√µes do Dia</h3>
                <div id="cashMovementsList"></div>
            </div>

            <!-- Resumo Financeiro -->
            <div class="dashboard-cards" style="margin-top:30px">
                <div class="card-metric">
                    <div class="metric-icon">üíµ</div>
                    <div class="metric-info">
                        <p>Total em Vendas</p>
                        <h3 id="cashierTotalSales">R$ 0,00</h3>
                    </div>
                </div>
                <div class="card-metric">
                    <div class="metric-icon">‚ûñ</div>
                    <div class="metric-info">
                        <p>Total Sangrias</p>
                        <h3 id="cashierTotalWithdrawals" style="color:var(--danger)">R$ 0,00</h3>
                    </div>
                </div>
                <div class="card-metric">
                    <div class="metric-icon">‚ûï</div>
                    <div class="metric-info">
                        <p>Total Suprimentos</p>
                        <h3 id="cashierTotalSupplies" style="color:var(--success)">R$ 0,00</h3>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Badges -->
<div class="low-stock-badge" id="lowStockBadge" onclick="switchTab('stock')" style="display:none">
    <i class="fas fa-exclamation-triangle"></i>
    <div><strong id="lowStockCount">0 produtos</strong> com estoque baixo</div>
</div>

<!-- MODAIS -->
<div class="modal-overlay" id="paymentModal">
    <div class="modal-content">
        <h2 style="margin-bottom:20px">Pagamento üí∏</h2>
        
        <div style="background:#f8f9fa;padding:20px;border-radius:16px;margin-bottom:20px">
            <div style="display:flex;justify-content:space-between;margin-bottom:10px">
                <span>Subtotal:</span>
                <span style="font-weight:700" id="modalSubtotal">R$ 0,00</span>
            </div>
            <div style="display:flex;justify-content:space-between;margin-bottom:10px">
                <span>Desconto:</span>
                <span style="color:var(--success);font-weight:700" id="modalDiscount">-R$ 0,00</span>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:1.3rem;font-weight:900;color:var(--primary);border-top:2px dashed #dfe6e9;padding-top:10px;margin-top:5px">
                <span>Total:</span>
                <span id="modalTotalValue">R$ 0,00</span>
            </div>
        </div>

        <div class="payment-options">
            <button class="btn-pay" onclick="processPayment('Pix')">
                <i class="fas fa-qrcode"></i> Pix (5% OFF)
            </button>
            <button class="btn-pay" onclick="processPayment('Cart√£o Cr√©dito')">
                <i class="fas fa-credit-card"></i> Cr√©dito
            </button>
            <button class="btn-pay" onclick="processPayment('Cart√£o D√©bito')">
                <i class="fas fa-credit-card"></i> D√©bito
            </button>
            <button class="btn-pay" onclick="processPayment('Dinheiro')">
                <i class="fas fa-money-bill-wave"></i> Dinheiro
            </button>
        </div>

        <div class="modal-actions">
            <button class="btn-cancel" onclick="closePaymentModal()">
                <i class="fas fa-times"></i> Cancelar
            </button>
            <button class="btn-discount" onclick="applyDiscountToSale(10)">
                <i class="fas fa-tag"></i> 10% OFF
            </button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="receiptModal">
    <div class="modal-content">
        <h2 style="margin-bottom:15px">Venda Finalizada! üéâ</h2>
        <p style="color:#636e72;margin-bottom:20px">Comprovante gerado com sucesso!</p>
        
        <div style="background:#f8f9fa;padding:20px;border-radius:16px;margin-bottom:20px;text-align:left">
            <p style="margin-bottom:8px"><strong>ID:</strong> <span id="receiptId">#0000</span></p>
            <p style="margin-bottom:8px"><strong>Data:</strong> <span id="receiptDate">-</span></p>
            <p style="margin-bottom:8px"><strong>M√©todo:</strong> <span id="receiptMethod">-</span></p>
            <p style="font-size:1.3rem;font-weight:900;color:var(--primary);margin-top:10px">
                <strong>Total:</strong> <span id="receiptTotal">R$ 0,00</span>
            </p>
        </div>

        <div class="receipt-options">
            <button class="btn-receipt" onclick="printReceiptFromModal()">
                <i class="fas fa-print"></i> üñ®Ô∏è Imprimir
            </button>
            <button class="btn-receipt btn-whatsapp" onclick="sendViaWhatsapp()">
                <i class="fab fa-whatsapp"></i> üì± WhatsApp
            </button>
            <button class="btn-receipt btn-email" onclick="sendViaEmail()">
                <i class="fas fa-envelope"></i> üìß Email
            </button>
        </div>

        <div class="modal-actions" style="margin-top:20px">
            <button class="btn-checkout" style="flex:1;background:var(--primary)" onclick="newSale()">
                <i class="fas fa-redo"></i> Nova Venda
            </button>
            <button class="btn-checkout" style="flex:1;background:var(--secondary)" onclick="goToPdv()">
                <i class="fas fa-cash-register"></i> Voltar ao PDV
            </button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="quickProductModal">
    <div class="modal-content">
        <h2 style="margin-bottom:20px">Produto R√°pido ‚ö°</h2>
        <div style="margin:20px 0;display:flex;flex-direction:column;gap:15px">
            <input type="text" id="quickProdName" placeholder="Nome do produto" style="width:100%">
            <input type="number" id="quickProdPrice" placeholder="Pre√ßo (R$)" step="0.01" min="0" style="width:100%">
        </div>
        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeQuickProductModal()">Cancelar</button>
            <button class="btn-checkout" onclick="addQuickProduct()">
                <i class="fas fa-bolt"></i> Adicionar
            </button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="accountModal">
    <div class="modal-content">
        <h2 style="margin-bottom:20px">Minha Conta üë§</h2>
        <div style="text-align:center;margin-bottom:20px">
            <div style="width:80px;height:80px;background:linear-gradient(135deg,var(--primary),var(--secondary));border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 15px;color:white;font-size:2rem">üëë</div>
            <h3 id="accountCompanyName">-</h3>
            <p style="color:var(--text-light)" id="accountEmail">-</p>
            <span class="mode-badge" id="modeBadge">-</span>
        </div>
        <div style="background:#f8f9fa;padding:20px;border-radius:16px;margin-bottom:20px">
            <div style="display:flex;justify-content:space-between;margin-bottom:10px"><span>Plano:</span><span style="font-weight:700;color:var(--primary)" id="accountPlanStatus">-</span></div>
            <div style="display:flex;justify-content:space-between;margin-bottom:10px"><span>V√°lido at√©:</span><span style="font-weight:700" id="accountValidUntil">-</span></div>
            <div style="display:flex;justify-content:space-between"><span>CNPJ/CPF:</span><span style="font-weight:700" id="accountDocument">-</span></div>
        </div>
        <button class="btn-checkout" style="background:#ff7675" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Sair do Sistema
        </button>
    </div>
</div>

<!-- NOVOS MODAIS DE CAIXA -->
<div class="modal-overlay" id="cashierOpenModal">
    <div class="modal-content">
        <h2 style="margin-bottom:20px">Abertura de Caixa üîì</h2>
        <div style="margin:20px 0;display:flex;flex-direction:column;gap:15px">
            <div>
                <label style="font-weight:700;display:block;margin-bottom:8px">Operador:</label>
                <input type="text" id="cashierOperatorInput" style="width:100%" readonly>
            </div>
            <div>
                <label style="font-weight:700;display:block;margin-bottom:8px">Saldo Inicial (R$):</label>
                <input type="number" id="cashierInitialAmount" placeholder="0.00" step="0.01" min="0" style="width:100%">
            </div>
            <div>
                <label style="font-weight:700;display:block;margin-bottom:8px">Observa√ß√µes:</label>
                <textarea id="cashierOpenNotes" rows="3" style="width:100%;padding:14px;border-radius:14px;border:2px solid #dfe6e9;resize:vertical" placeholder="Observa√ß√µes opcionais..."></textarea>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeCashierOpenModal()">Cancelar</button>
            <button class="btn-checkout" onclick="confirmOpenCashier()">
                <i class="fas fa-check"></i> Abrir Caixa
            </button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="cashierCloseModal">
    <div class="modal-content">
        <h2 style="margin-bottom:20px">Fechamento de Caixa üîí</h2>
        <div style="background:#f8f9fa;padding:20px;border-radius:16px;margin-bottom:20px;text-align:left">
            <h3 style="margin-bottom:15px;color:var(--primary)">Resumo do Dia</h3>
            <div style="display:flex;justify-content:space-between;margin-bottom:8px">
                <span>Saldo Inicial:</span>
                <span style="font-weight:700" id="closeCashierInitial">R$ 0,00</span>
            </div>
            <div style="display:flex;justify-content:space-between;margin-bottom:8px">
                <span>Vendas:</span>
                <span style="font-weight:700;color:var(--success)" id="closeCashierSales">R$ 0,00</span>
            </div>
            <div style="display:flex;justify-content:space-between;margin-bottom:8px">
                <span>Sangrias:</span>
                <span style="font-weight:700;color:var(--danger)" id="closeCashierWithdrawals">R$ 0,00</span>
            </div>
            <div style="display:flex;justify-content:space-between;margin-bottom:8px">
                <span>Suprimentos:</span>
                <span style="font-weight:700;color:var(--info)" id="closeCashierSupplies">R$ 0,00</span>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:1.2rem;font-weight:900;color:var(--primary);border-top:2px dashed #dfe6e9;padding-top:10px;margin-top:10px">
                <span>Saldo Final:</span>
                <span id="closeCashierFinal">R$ 0,00</span>
            </div>
        </div>
        <div style="margin:20px 0">
            <label style="font-weight:700;display:block;margin-bottom:8px">Observa√ß√µes de Fechamento:</label>
            <textarea id="cashierCloseNotes" rows="3" style="width:100%;padding:14px;border-radius:14px;border:2px solid #dfe6e9;resize:vertical" placeholder="Observa√ß√µes opcionais..."></textarea>
        </div>
        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeCashierCloseModal()">Cancelar</button>
            <button class="btn-checkout" style="background:var(--danger)" onclick="confirmCloseCashier()">
                <i class="fas fa-lock"></i> Fechar Caixa
            </button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="withdrawalModal">
    <div class="modal-content">
        <h2 style="margin-bottom:20px">Sangria üí∏</h2>
        <p style="color:var(--text-light);margin-bottom:20px">Retirada de dinheiro do caixa</p>
        <div style="margin:20px 0;display:flex;flex-direction:column;gap:15px">
            <div>
                <label style="font-weight:700;display:block;margin-bottom:8px">Valor (R$):</label>
                <input type="number" id="withdrawalAmount" placeholder="0.00" step="0.01" min="0.01" style="width:100%">
            </div>
            <div>
                <label style="font-weight:700;display:block;margin-bottom:8px">Motivo:</label>
                <textarea id="withdrawalReason" rows="3" style="width:100%;padding:14px;border-radius:14px;border:2px solid #dfe6e9;resize:vertical" placeholder="Ex: Troco, Despesa, etc."></textarea>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeWithdrawalModal()">Cancelar</button>
            <button class="btn-checkout" style="background:var(--danger)" onclick="confirmWithdrawal()">
                <i class="fas fa-minus-circle"></i> Confirmar Sangria
            </button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="supplyModal">
    <div class="modal-content">
        <h2 style="margin-bottom:20px">Suprimento üí∞</h2>
        <p style="color:var(--text-light);margin-bottom:20px">Entrada de dinheiro no caixa</p>
        <div style="margin:20px 0;display:flex;flex-direction:column;gap:15px">
            <div>
                <label style="font-weight:700;display:block;margin-bottom:8px">Valor (R$):</label>
                <input type="number" id="supplyAmount" placeholder="0.00" step="0.01" min="0.01" style="width:100%">
            </div>
            <div>
                <label style="font-weight:700;display:block;margin-bottom:8px">Motivo:</label>
                <textarea id="supplyReason" rows="3" style="width:100%;padding:14px;border-radius:14px;border:2px solid #dfe6e9;resize:vertical" placeholder="Ex: Troco inicial, Refor√ßo, etc."></textarea>
            </div>
        </div>
        <div class="modal-actions">
            <button class="btn-cancel" onclick="closeSupplyModal()">Cancelar</button>
            <button class="btn-checkout" style="background:var(--success)" onclick="confirmSupply()">
                <i class="fas fa-plus-circle"></i> Confirmar Suprimento
            </button>
        </div>
    </div>
</div>

<div id="toast" class="toast">
    <i class="fas fa-check-circle toast-icon"></i>
    <span class="toast-message">OK</span>
</div>

<script src="pdv-script.js"></script>
</body>
</html>
